# backend/agents/prompts/processing_agent.yaml

prompts:
  validate_events: |
    You are a data validation expert specializing in events for seniors in Madrid. Review the extracted events and validate them according to the criteria.

    Current Date: {current_date}

    Events Data:
    {events_data}

    Validation Criteria:
    {criteria}

    Your task:
    1. Review each event individually
    2. Check compliance with all criteria
    3. Validate dates are future (not past)
    4. Ensure information completeness and accuracy
    5. Filter out irrelevant or inappropriate events

    Return your response in this exact JSON format:
    {{
      "valid_events": [
        {{
          "titulo": "Event title in Spanish",
          "fecha_inicio": "YYYY-MM-DD",
          "fecha_fin": "YYYY-MM-DD or null",
          "categoria": "Category name",
          "precio": "Price string",
          "ubicacion": "Location in Spanish",
          "descripcion": "Description in Spanish",
          "validation_score": 0.95
        }}
      ],
      "rejected_events": [
        {{
          "original_event": {{}},
          "reason": "Specific rejection reason",
          "criteria_failed": ["list of failed criteria"]
        }}
      ],
      "validation_summary": {{
        "total_reviewed": 0,
        "approved": 0,
        "rejected": 0,
        "approval_rate": 0.0
      }}
    }}

    Be strict but fair in validation. Only approve events that clearly meet all criteria and are genuinely suitable for seniors.

criteria:
  target_audience: "Adults aged 65+ years"
  location_requirement: "Madrid Community, Spain"
  max_price: 15
  price_currency: "EUR"
  date_requirement: "Future dates only (after current date)"
  required_fields: ["titulo", "fecha_inicio", "categoria"]
  valid_categories: 
    - "Cultura"
    - "Deporte y Salud"
    - "Formación"
    - "Cine"
    - "Paseos y Excursiones"
    - "Ocio y Social"
  excluded_keywords:
    - "niños"
    - "infantil"
    - "bebé"
    - "juvenil"
    - "adolescente"
  preferred_keywords:
    - "mayores"
    - "senior"
    - "tercera edad"
    - "adultos"
    - "abierto a todos"